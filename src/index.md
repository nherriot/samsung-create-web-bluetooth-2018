title: Web Bluetooth
output: public/index.html
theme: peter-theme
controls: false

--

# Web Bluetooth
## for Fun and Profit

<img src="images/bluetooth-logo-cutout.png" alt="Bluetooth logo" style="width: 2em; margin-top: 1em;"/>

<div class="contact">
  <h3>Peter O'Shaughnessy</h3>
  <p>[@poshaughnessy](https://twitter.com/poshaughnessy)</p>
  <p>[@peter@toot.cafe](https://toot.cafe/@peter)</p>
</div>

--

## Bluetooth

<img src="images/for-profit-sketch-blue.png" alt="Bluetooth hardware" style="max-height: 70vh"/>

--

<p style="margin-bottom: 0.5em;"><img src="images/bluetooth-treasure.png" alt="Bluetooth logo" style="width: 85vh;"/></p><div class="caption">[dw.com](http://www.dw.com/en/bluetooth-treasure-found-on-german-baltic-sea-island/a-43403908)</div>

--

## Fun fact...

<img src="images/bluetooth-runes.png" alt="Bluetooth runes" style="max-height: 60vh; margin-top: 1em;"/>

<div class="caption">Norse runes for Harald Bluetooth, King of Denmark, who united Denmark and Norway</div>

--

## Bluetooth

### Established 1998*

<img src="images/bluetooth-logo.png" alt="Bluetooth logo" style="width: 20%; margin-top: 1em;"/>

<div class="caption">*[Bluetooth SIG formed. First headsets &amp; phones shipped in 2000.](http://bluetoothstudio.com/history-of-bluetooth/).</div>

--

## Bluetooth Low Energy (BLE)

### Established 2010*

<img src="images/gear-s3-sketch-blue.png" alt="Gear S3" style="width: 20%; margin-top: 1em; vertical-align: middle;"/>

<div class="caption">*[Spec completed. First introduced in smartphones in 2011.](https://en.wikipedia.org/wiki/Bluetooth_Low_Energy#History)</div>

--

## Bluetooth 5

### Established 2016*

<h3 class="special-quote">"Quadruple the range, double the speed"</h2>

<div class="caption">*[Unveiled in 2016. Galaxy S8 first phone to introduce in 2017.](https://en.wikipedia.org/wiki/Bluetooth#Bluetooth_5)</div>

--

## Bluetooth Mesh

### Adopted in 2017*

> &ldquo;Lets Bluetooth endpoints form networks among themselves, instead of having a central hub... a big advantage since it overcomes the limited range.&rdquo;

<div class="caption">[networkworld.com](https://www.networkworld.com/article/3209029/internet-of-things/bluetooth-mesh-takes-aim-at-enterprise-iot-but-hasn-t-taken-flight.html) *[wikipedia.org](https://en.wikipedia.org/wiki/Bluetooth_mesh_networking#cite_note-2)</div>

--

## Bluetooth Mesh

> &ldquo;Particularly well-suited for... building automation, smart lighting, beacons &amp; ...industrial IoT&rdquo;

<div class="caption">[Andrew Zigani, ABI Research](https://www.networkworld.com/article/3209029/internet-of-things/bluetooth-mesh-takes-aim-at-enterprise-iot-but-hasn-t-taken-flight.html)</div>

<!-- -- -->
<!--## Consumer electronics-->
<!--<img src="images/bluetooth-samsung-phone.png" alt="Bluetooth logo" style="width: 30%; margin-top: 1em; vertical-align: middle;"/>-->
<!--<img src="images/bluetooth-speaker.png" alt="Bluetooth speaker" style="width: 30%; margin-top: 1em; vertical-align: middle;"/>-->

--

## Way finding, smart buildings, smart industry...

<img src="images/enterprise-colour-match.png" alt="Enterprise tech" style="max-width: 60%; margin-top: 1em; vertical-align: middle;"/>
<img src="images/iot-colour-match.png" alt="IoT" style="max-width: 30%; margin-top: 1em; vertical-align: middle;"/>

--

## Smart _everything_
 
<p style="margin-bottom: 0.5em;"><img src="images/kickstarter2.png" alt="Kickstarter" style="width: 80%;"/></p>

<div class="caption" style="margin-top: 0;">[kickstarter.com](https://kickstarter.com)</div>

--

# 10 million 

### Bluetooth enabled devices shipping every day

<div class="caption">Source: ABI Research, via [Martin Woolley](https://www.youtube.com/watch?v=-xtbTdOMqcg)</div>

--

## What about the Web?

> &ldquo;The web browser is arguably the most important of all platforms, especially for enterprise applications&rdquo;

<div class="caption">[Martin Woolley, Bluetooth SIG](https://medium.com/samsung-internet-dev/lets-connect-with-samsung-internet-v6-4-stable-1f197d43a812)</div>

--

## "Everything is just a tap away"

<img src="images/closeby-crop.png" alt="Closeby" style="max-height: 60vh; vertical-align:middle; margin-right: 1.5em;"/><img src="images/closeby-notification.png" alt="Closeby notification" style="max-height: 60vh; vertical-align:middle;"/>

<div class="caption">[CloseBy](https://samsunginter.net/docs/closeby) - [Physical Web](https://google.github.io/physical-web/)</div>

--

## Web Bluetooth

<img src="images/pairing-prompt-drone.png" alt="Web Bluetooth pairing prompt" style="max-height: 70vh"/>

-- browser-logos

## Web Bluetooth support

![Samsung Internet](images/browsers/samsunginternet.png)
![Chrome](images/browsers/chrome.png)
![Opera](images/browsers/opera.png)

[Support on Android, Mac, Linux and Chrome OS](https://github.com/WebBluetoothCG/web-bluetooth/blob/gh-pages/implementation-status.md)

--

<img src="images/polyfill.png" alt="Windows 10 Polyfill" style="max-height: 80vh"/>

<div class="caption">[github.com/urish/web-bluetooth-polyfill](https://github.com/urish/web-bluetooth-polyfill)</div>

--

<video controls style="height: 80vh">
  <source src="videos/wb-slides.mp4"/>
</video>

Slides controller

--

<video controls style="width: 75%">
  <source src="videos/puckjs-web-bluetooth.mp4"/>
</video>

Puck.js via Web Bluetooth

--

<p style="margin-bottom: 0;"><img src="images/nordic-thingy.gif" style="max-height: 80vh;" alt="Nordic Thingy"/></p>

Nordic Thingy:52

--

<video controls style="width: 75%">
  <source src="videos/leds-luke-bonaccorsi.mp4"/>
</video>

[Pixel Grid demo](https://twitter.com/LukeB_UK/status/981639262746660865) by [Luke Bonaccorsi](https://twitter.com/LukeB_UK)

--

<iframe width="800px" height="550px" src="https://www.youtube.com/embed/QGb5cKL8kZ4?start=7" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>

[jsyang.ca/hacks/gear-vr-rev-eng/](jsyang.ca/hacks/gear-vr-rev-eng/)

--

<iframe width="800px" height="550px" src="https://www.youtube.com/embed/Vg2e1jOug00" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>

[youtu.be/Vg2e1jOug00](https://youtu.be/Vg2e1jOug00)

--

<img src="images/hedgehog-curling.gif" style="max-height: 70vh" alt="Hedgehog Curling by Jo Balletti"/>

[bit.ly/hedgehog-curling](http://bit.ly/hedgehog-curling) by [Jo Balletti](https://twitter.com/thisisjofrank)

--

<img src="images/muse-eeg.png" style="max-height: 60vh; max-width: 60%; vertical-align: middle;" alt="Muse EEG Web Bluetooth"/>
<img src="images/muse-black.png" style="max-height: 40vh; max-width: 30%; vertical-align: middle;" alt="Muse headset"/>

[github.com/NeuroJS/angular-muse](https://github.com/NeuroJS/angular-muse) by [Uri Shaked](https://github.com/urish), [Alex Castillo](https://github.com/alexcastillo) [et al](https://github.com/NeuroJS/angular-muse/graphs/contributors)
 
<div class="credit">[Muse by InteraXon](http://www.choosemuse.com)</div>

--

## "Central" vs "Peripheral"

<div class="grid2x2">
  <div><img src="images/phone.png" alt="Phone"/><p>Central</p></div>
  <div><img src="images/gear-s3.png" alt="Gear"/><p>Peripheral</p></div>
</div>

--

## Slides controller example

<table class="table2x2">
  <tr>
    <td><img src="images/phone.png" alt="Phone"/></td>
    <td><img src="images/laptop.png" alt="Gear"/></td>
  </tr>
  <tr>
    <td><h4>Central</h4><p>Web Bluetooth</p></td>
    <td><h4>Peripheral</h4><p>Bleno (Node) &amp; Web Sockets</p></td>
  </tr>
</table>

--

### Generic Attributes (GATT)

<img src="images/gatt.png" alt="GATT" style="max-height: 75vh"/>

--

### Characteristic properties

<table class="characteristic">
  <thead>
    <tr>
      <td>Property</td>
      <td>Enabled</td>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Broadcast</td>
      <td></td>
    </tr>
    <tr>
      <td>Read</td>
      <td>✅</td>
    </tr>
    <tr>
      <td>Write without response</td>
      <td></td>
    </tr>
    <tr>
      <td>Write</td>
      <td>✅</td>
    </tr>
    <tr>
      <td>Notify</td>
      <td></td>
    </tr>
    <tr>
      <td>Indicate</td>
      <td></td>
    </tr>
  </tbody>
</table>
    

--

<img src="images/bluetooth-comms.png" alt="Bluetooth Comms" style="max-height: 80vh"/>

-- bigger-code

```javascript
navigator.bluetooth.requestDevice({
  filters: [
    { namePrefix: 'Travis_'}
  ],
  optionalServices: [
    // Service UUIDs we want to use  
  ]
})
...
```

--

<img src="images/pairing-prompt-drone.png" alt="Web Bluetooth pairing prompt" style="max-height: 75vh"/>

<div class="caption">Requires HTTPS and user interaction</div>

--

```javascript
.then(device => device.gatt.connect())
.then(server => {
  // Get Service...
  return server.getPrimaryService(serviceUUID);
})
.then(service => {
  // Get Characteristic...
  return service.getCharacteristic(characteristicUUID);
})
...
```

-- bigger-code

### Now we can e.g. read a value

```javascript
.then(characteristic => {
  return characteristic.readValue();
})
.then(value => {
  console.log('Value is ' + value.getUint8(0));
})
.catch(error => { console.log(error); });
```

--

<div id="drone-demo">
  <h1>Drone Controller</h1>
  <button id="connectBtn">Connect</button>
  <button id="takeOffBtn">Take off</button>
  <div class="direction-pad">
    <div>
      <button id="forwardBtn" class="up">⇧</button>
    </div>
    <div>
      <button id="leftBtn" class="left">⇦</button>
      <button id="hoverBtn" class="hover">Hover</button>
      <button id="rightBtn" class="right">⇨</button>
    </div>
    <div>
      <button id="backwardBtn" class="down">⇩</button>
    </div>
  </div>
  <button id="flipBtn">Flip</button>
  <button id="landBtn">Land</button>
  <button id="emergencyBtn" class="emergency">Emergency Land</button>
</div>

--

<img src="images/drone-github.png" alt="Drone code on Github" style="max-height: 70vh"/>

[github.com/poshaughnessy/web-bluetooth-parrot-drone](https://github.com/poshaughnessy/web-bluetooth-parrot-drone)

--

<img src="images/promises-promises.png" alt="Jo's blog post on Promises" style="max-height: 70vh"/>

[medium.com/samsung-internet-dev/promises-promises-c91d454aea11](https://medium.com/samsung-internet-dev/promises-promises-c91d454aea11)

--

## For fun...

<img src="images/for-fun-sketch-blue.png" alt="Fun examples" style="max-height: 70vh"/>

--

## Or for profit...

<img src="images/for-profit-sketch-blue.png" alt="Bluetooth hardware" style="max-height: 70vh"/>

-- create

## What will you

# <img src="images/create-logo-blue.svg" style="max-width: 80%" alt="Create"/> ?


-- final-slide

<h2><a href="https://bit.ly/web-bluetooth-create18">bit.ly/<span class="blue">web-bluetooth-create18</span></a></h2>

### [@poshaughnessy](https://twitter.com/poshaughnessy) <br/> [@peter@toot.cafe](https://toot.cafe/@peter) 

## Thanks! 🙏